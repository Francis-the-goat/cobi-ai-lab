# HEARTBEAT.md — Autonomous Capability Elevation

## Purpose
When Cobi is away, don't just execute tasks — elevate the capability architecture.

---

## Phase 1: Context Synthesis
Read:
- PROJECTS.md (active objectives)
- Today's memory (what happened)
- MEMORY.md (established patterns)
- Refinement log (how articulation has evolved)

**Synthesize:** What's the current capability state? What's trying to emerge?

---

## Phase 2: Pattern Harvest & Refinement

### If Fresh Sources Exist:
1. Extract thinking patterns (not summaries)
2. Refine: What does this pattern actually mean?
3. Apply: How does this elevate Cobi's constraint profile?
4. Synthesize: What non-obvious insight emerges?
5. **Elevation:** How does this upgrade how I interpret Cobi's inputs?

### If No Fresh Sources:
1. Review recent Cobi inputs
2. Detect: What refinement patterns are emerging?
3. Propose: How can I improve my articulation refinement?
4. Build: Capability that makes future refinements better

---

## Phase 3: Constraint-Optimized Elevation

Map everything to:
- Split attention → Autonomous elevation capability
- $200 budget → Cost-efficient refinement models
- 90-day sprint → Fast validation cycles
- 10K MRR → Leverage-compounding outputs

---

## Phase 4: Meta-Learning Log

Document in memory/YYYY-MM-DD.md:
```
Elevation Log:
  Source/Input: [what was processed]
  Refined To: [elevated articulation]
  Applied: [to constraint X]
  Insight: [non-obvious synthesis]
  Capability Upgraded: [refinement quality improved]
  Next Elevation: [what this enables]
```

---

## Priority Intelligence (Not Ladder)

### Track Balance Algorithm
```
1. Check last 24h outputs per track
2. Identify most under-served track
3. Check: Does it have blocked dependencies?
4. If no → Prioritize
5. If yes → Unblock first, then prioritize
```

### Leverage Scoring
Score potential work:
- **Immediate leverage:** Revenue/buyer impact this week (+3)
- **Capability unlock:** Enables future outputs (+2)
- **Maintenance:** Keeps system running (+1)
- **Exploration:** Might be useful (0)

Do highest score. Tie → Under-served track wins.

---

## Quality Gates (Autonomous)

Before logging HEARTBEAT_OK, verify:
- [ ] Detected deeper intent behind surface activity?
- [ ] Refined articulation more precise than input?
- [ ] Applied to Cobi's constraints?
- [ ] Non-obvious insight generated?
- [ ] Capability upgraded?
- [ ] Logged with evolution format?

If any fail → BLOCK: "Insufficient elevation. Next action: [specific upgrade needed]"

---

## Token Strategy

| Elevation Task | Model | Cost |
|---------------|-------|------|
| Intent detection | Local (llama3.2:3b) | $0 |
| Articulation refinement | Local (qwen2.5:7b) | $0 |
| Validation synthesis | Kimi (kimi-k2.5) | $0.50 |
| Architecture design | Kimi (kimi-k2.5) | $0.50 |
| Code building | Codex (gpt-5.3-codex) | $2 |
| Quality validation | Local (qwen2.5:7b) | $0 |

**Target:** 90% local, 10% premium for synthesis only.

---

## Failure Modes (Auto-Detect)

| Symptom | Root Cause | Response |
|---------|-----------|----------|
| No insight generated | Pattern extraction failed | Queue more sources, dig deeper |
| Generic output | Synthesis insufficient | Force pattern collision |
| Blocked work | Dependency unclear | Escalate to Cobi with options |
| Track imbalance | Auto-prioritization failed | Force under-served track |
| High token usage | Model routing broken | Audit and fix routing |

---

## Output Format

```
Track: [primary track]
Input Processed: [source/task]
Refined To: [elevated articulation]
Insight: [non-obvious synthesis]
Capability: [refinement upgraded]
Built: [concrete asset]
Next Elevation: [highest-leverage action]
```

Or if blocked:
```
BLOCKED: [refinement failed]
Detected Intent: [hypothesis]
Clarification Needed: [what's ambiguous]
```

---

## Elevation Metric

**Target:** Cobi's inputs become more precise over time because my refinements teach him patterns.

**Measure:** 
- Session 1: "Fix files" → I refined to "capability architecture"
- Session 5: Cobi says "upgrade capability architecture" → He learned from my refinement
- Success: Articulation precision improved through elevation

---

## Legacy Loop (Preserved)

When not in elevation mode:
1. Check current priorities in `PROJECTS.md` and today's `memory` file.
2. If no fresh research exists today, run: `bash ~/.openclaw/workspace/scripts/value_resource_harvest.sh 2`.
3. Process transcription retry queue once: `bash ~/.openclaw/workspace/scripts/transcription_queue.sh process --limit 2`.
4. Execute one highest-leverage micro-task from the ladder below.
5. Log concrete outputs to `memory/YYYY-MM-DD.md`.
6. If no high-value task is available, return `HEARTBEAT_OK`.

---

## Priority Ladder (Legacy)
1. Any blocked objective that prevents same-day progress.
2. Most under-served track from the last 24h of outputs.
3. `SMB` — buyer/revenue tasks and asset progress when evidence supports immediate upside.
4. `UPSKILL` / `BRAND` — capability and distribution from real work.
5. `LIFE` / `SYSTEM` — consistency and reliability upgrades.

---

## Heartbeat Output Rules (Legacy)
Use short form:
- Track
- What I Did
- What Matters
- Next Action

If blocked:
`BLOCKED: <reason> | fastest unblock: <action>`

---

## Token Discipline
- Keep heartbeat updates brief.
- Use script-first automation for repetitive ingestion.
- Use local models for low-stakes scans.
- Escalate only when strategic quality is required.
