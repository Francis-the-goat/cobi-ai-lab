Okay, so recently OpenAI released their agent's SDK, and this is basically, an upgraded version of the Swarm SDK. What I wanna do in this video is just go through building a basic sort of agent or multi-agent, sort of system in here that uses tools, we'll look at some of the features that they've got, how they work, and how you can basically get started with this. All right, so first thing you're gonna need to do is install the OpenAI agents framework. so this is the new framework that's replaced swarm in here. So you can see that I'm basically just bringing that in. I'm then bringing in my OpenAI key here. And what I thought would be fun was be to build an In-N-Out Burger Chatbot and just look at an agent that could go off, get different information, bring it in, and use it, and we'll do some variations of a McDonald's one, and maybe even a DoorDash one that can delegate to the other two. and we'll look at some of the ways that you could set something like that up. Okay, so you can see that I've got some context of the menu prices. And this basically just came from a ChatGPT search. we need to set it up so that we can handle async requests. and then let's come down and look at, what we need to get started. So the first two key things in building agents with this agent's SDK, these two classes of agent and runner. So agent is what you use to assemble an agent, and then runner is what you use to run the agent. So assembling the agent is pretty simple. We basically, accentuate this agent. We pass in a name, we pass in some instructions, we pass in a model. In fact, if we don't pass in a model, it will default to one of the models. Later on, you'll see we can pass in tools. There are other things we can pass in. But the simplest thing to get it started is just to pass these in. Now in your instructions, this is basically giving instructions to the agent. So you can see here, because I'm building an In-N-Out Burger sort of assistant. You can see that, okay, we're gonna basically say, you're a helpful server at In-N-Out Burger. Respond to questions based on the menu below. And then I'm injecting in the menu prices, in there. As you'll see later on, we could actually just do a web search and sort of pull some of these in. But for now, I'm just injecting, this stuff in. Alright, so the first one up is doing a synchronous, run. So you've got three types of runs that you can do. You can do basically a synchronous run, async run, and a streamable run. So I'm gonna look at each of these as we go through. so you can see that the sort of, the one that you probably not gonna use that often is gonna be the synchronous run. So here, we just basically type in runner.run_sync, pass in the agent, pass in the input, in here. Now, in this case, I'm using inputs as strings. but you can pass in a variety of different contexts in there. Later on, we'll look at, passing in a chat template, into to it as well as we go through. All right. You can see that after we've run this, we can print it out and see the result, final output. And we get this, Double Double is $5.90. And sure enough, if we come up here, we can see the Double Double is $5.90, the combo is $10.45. Alright, so now you know, I can ask you, how much is it with a combo? now I'm basically moving to async, so I'm just runner.run, but I have to use a weight of course. and so sure enough, that runs and I can see I've got $10.45, before tax. if I ask it to do two things, it's actually pretty good, right? if I say, Hey, I want Double Double, and french fries says, okay, Double is $5.90 french fries are $2.30. And then it actually gets the math right, which is quite surprising and quite annoying for what I was gonna show you something later on. But you can see, sure enough, our french fries are $2.30 up there. All right, so now the one that really kind of stumped me and surprised me was that actually it got the math right for doing it with tax as well, so that you can see if I ask it, how much is 32 Double Doubles each with french fries with tax. it goes through and calculates out, each of these, for, each Double Double, each french fries, that's gonna be $8.20, 32 times that is gonna be, $262.40. Now calculate the tax and I think it's getting it right, just from sort of rough estimate in here. And to be honest, I was actually expecting it to get it wrong, because really this is the kind of thing we'd want to use a tool for, right? To be able to calculate it. So we'll look at that using a tool for that in a second. Before we do that though, let's move on and actually, look at a streaming response. So you can see just, now we've got runner.run_streamed. it's gonna pass things back. And here we can basically print out these raw responses. So I'm just gonna ask it, how much is everything on the menu, but see, sure enough, we're getting this streamed response coming back, through there. and this is basically just taken from their docs. so you can just use it if you want to be able to see a streamed response to see how fast things are coming back. The other way that you can do this though is if you actually want to see all the events that are happening, in there. But when we do it like this, we are just seeing the raw response events back. so there are a lot of events in here. If we just come down and look at the result, you'll see there's a whole bunch of different stuff going on in there. So if we wanted to track, all the different kinds of events that are coming through, we could do something like this where we can see, okay, the different, stream events, any tools that were called, et cetera. you can basically go through and see this. So again, this is just taken from their docs, that you can use in there. All right, so what if we wanna add a tool to our agent? So in this case, I'm gonna hardwire what the tax is gonna be and we want the agent now to basically use the tool for calculating the tax. So in here I've basically got it some information that's gonna pass in the order total. It's gonna pass in the tax rate. We are gonna calculate that and we're gonna return back. The tax on your order is, and then the total with tax is, right. So that's gonna be the response from the tool. So you can see Now to add that to our agent, all we needed to do was just add in tools equals, and then we pass a list of tools. And, in this case we're just passing in the calculate tax, but you could imagine that we pass in a tool for, adding up different items, adding things together, a few different math tools or something like that in here. Okay. And you can see I've put a print statement up here, for checking, you know that this is actually being run right for just debugging like that. okay, now if we run this, we're passing in our agent, we're passing in, how much is five Double Doubles each with french fries. and we're expecting it to, calculate the tax. Now you can see sure enough, It basically has, used our tax calculation function. The inputs were, the order was $41. The tax was 7.25%. And you can see that while this has been the response back from the tool, the agent itself has rephrased that, right? So we've got the total for five Double Doubles each with french fries is $41 with tax that comes to $43.97, and just running it through $41 times one plus our tax rate is getting what we would expect in there. Now you can see that in there, there's a lot of things going on. So if you wanna sort of see where, you've got your raw responses, but if you wanna see the actual tools called, et cetera, you can look in this new items, area. So I just got ChatGPT to write out, a little function to extract all this out. And if we come down here, we can see sure enough, the function that got called was calculate tax. The arguments were the $41 that went in tax rate was 7.25 and actually I had hardwired this anyway, but we could have made it dynamic. the output in there, the tax on your order was $2.97 with the total being, $43.97. Now you can see if we come back to our tool. That's the output, right? is exactly what we expected, up here is that's what's gonna go back into the agent. So it can then form its sort of final response in there. Alright, what if we wanna do something like web search tools? So one of the cool tools that they've added now is this web search tool. So now we're gonna make a new agent, we're gonna import, and you can see that we can put in the web search tool. We can also use file search tool. I'll perhaps do a different video about that, and show how you could build some really quick sort of RAG solutions, et cetera. You can see, this time now we've basically got a McDonald's assistant, where it's using the web search tool to answer questions and get prices. So now if I ask the McDonald's agent, okay, how much is a Big Mac? you can see it goes off and does a search, and it will come back with, the answer, to that. So it basically gives us, this answer in here. and it gives us also where it's actually getting this from and, a little bit of information that came back in the search. So if we wanted to use those annotations for something, like if we wanted to actually get, those things, we can actually get those through the result.new_items. index into there and basically get the annotations. And you can see for each of these, we've got basically the website, that it got the information from in here. so you could do this, in this way. The other thing you could do too is you could spin this out to be an external tool, and return it in a nicer way, basically filtering out, doubles of URLs or things like that. Or you could even go off and scrape those URLs and bring that back and send that through as context in there. Alright. Another cool thing for tools wise that you can do is you can actually have other agents as tools. So if you look at it now, we can basically make an orchestrator agent, I'm calling this one like the DoorDash agent. And so the DoorDash agent, it's gotta decide, okay, which other agents does it use? Now, this can be done either as tools or as handoffs. In this case, I'm doing it as tools. And perhaps a future video, I'll show you, other ways that you could do sort of a multi-agent strategy where you could sort of hand off to each of these agents. But in this case, really the sort of DoorDash one wants to be able to take everything, and, sort of, reuse it, et cetera. So the DoorDash agent wants to be able to, delegate to the other agents to get prices back, to get information back. Now you can see the agents that we're using as a tool, is I've got that original agent, which is the In-N-Out burger agent. I'm giving it the tool name, I'm giving it the tool description, and I've got the McDonald's agent that we just made, which we know has got, web search, tools up there. And, I can say get prices for McDonald's. I could certainly, make these, prompts a little bit better. Alright. You can see now when I ask the orchestrator agent how much is a Double Double at, in and out? It knows that, okay, Double Double at, in and out costs $5.90 for just for the burger. If you want a combo, it's $10.45. and now you can see that because our McDonald's assistant or our McDonald's agent actually has web search, we can even ask us things like, what does McDonald's have for breakfast? And can see, sure enough, it comes back with a list of things, that are for breakfast. And if we wanted, we could index into that to basically pull out the annotations if we, wanted to send people to a link or something like that. The other thing that we can do now is that we can ask it, okay, is a Big Mac or a Double Double animal style cheaper? Now it can go off and use the various agents as tools. So you can see here we've got the Double Double animal style is approximately, $6.33, including tax while the Big Mac, from McDonald's is $5.69 this can vary based on location. You can see now that our orchestrator agent is actually using both of those other agents, as tools to do something, in here. Now if we look at the output, we can see there's a whole bunch of different things in there, including things like where it got the, fast food menu prices to be able to get the price of a Big Mac. And it does sort of show that, okay, the price of a Big Mac in here seems to change depending on where you are, here. So we could have, put more things about location or something in there. All right, so what if we want to give our system, memory so we can allow them to basically, know what's gone on in the conversation beforehand. So to do that, it's actually pretty simple. So we'll go back to our In-N-Out chat bot or our In-N-Out, assistant. we've got the tool of calculate tax in here, and you can see, I can start off by just saying, okay, first let me order Double Doubles, with french fries. and it comes back, saying, okay, would you like to make that a Double Double combo or would you prefer to order them separately? So if we look at that result that comes back, we can actually index to that and go to this two input list. And that will give us the conversation in the sort of standard chat format. So you can see here we've got, user. The role of user, we've got, okay. First let me order a Double Double, and then we've got the next object that we've got in there is the role of assistant, replying back with, content of type message. And you can see we've also got some extra data in there, type output text, type message, content annotations, et cetera in there. All right, so I can make a, just a quick little function that basically takes this and we can append our new content and our new user message back. So if I come back now and say, yes, make it a combo, please. And we append that to the result that we had before by getting this input list, we can now basically pass that in and, you can see now it comes back, your Double Double, combo will be $11.21, including tax. Would you like Anything else? You can say, yes, can I get a coffee as well? That's all. and sure enough we append that. And you can see we get back your total for the Double Double combo and a coffee is $12.66. So it's persisted that conversation as we've gone through. just like we would with any of these kind of things, we could set up the function to basically, just trim it down to the last five or the last. 10, interactions or something. If you wanted to do a summary, we could have, another function that basically does a quick summary, and then passes it in. You've got a whole bunch of different things that you could do like that. And if you are gonna do something like that, especially with something like Async, you can send it off to do the summary for parts of the conversation earlier are getting summarized as you go through and you're just appending the last few recent ones in full as you go through this. So this shows you just some of the simple things of how you can get started building some agents with this. It's a pretty easy framework, to be able to do stuff. I think I'll do another video sort of looking at some of the more advanced things like guard rails, like passing in different kinds of contexts, like getting structured responses back and stuff like that. but it's certainly something that you can, start building with both with the OpenAI models and with models that support this OpenAI API format. So I've put a video up on my Patreon about how to do that and how to use this framework with Gemini, et cetera. But I'll look at some of the more advanced things in videos that are coming up. Anyway, as always, if you've got questions, please put them in the comments below. I'd love to hear ideas from you guys about what agents to build. one of my biggest challenges with these things is trying to think of a nice, coherent story for an agent, where it's gonna be something that I can show off the different parts of the framework, but also, do it in a sort of more realistic manner rather than just walk through the docs, et cetera. So let me know if you've tried out the framework. Let me know what you're building with it, et cetera. As always, if you found the video useful, please click and subscribe, and I will talk to you in the next video. Bye for now.
